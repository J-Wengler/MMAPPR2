language: r
cache: packages
r: 
  - bioc-release
  - bioc-devel
git:
  # To only get latest commit
  depth: 1
warnings_are_errors: true
sudo: required

before_install:
  - R -e 'install.packages("roxygen2")'
  
before_script:
  # so NAMESPACE is up-to-date
  - R -e 'devtools::document(roclets=c("rd", "collate", "namespace"))'

script:
  - R CMD build .
  - R CMD check *tar.gz

after_success:
  # BiocCheck
  - R -e 'source("https://bioconductor.org/biocLite.R"); biocLite("BiocCheck")'
  - R CMD BiocCheck *tar.gz
